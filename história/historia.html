<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>História de Ribeirão Pires — Painel Interativo</title>

    <!-- Fonts (matches index) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@600;700&family=Nunito:wght@700&display=swap"
      rel="stylesheet"
    />

    <!-- Reuse the same site CSS so header (rb-*) appears identical -->
    <link rel="stylesheet" href="../index/style.css" />

    <style>
      /* Página específica: variáveis e estilos (timeline, panels, gallery, quiz, e botões restaurados) */
      :root {
        --bg: #e6f2ff; /* Suave azul claro */
        --card: #f7f6f3;
        --accent: #f06d5a;
        --muted: #f3e9d2;
        --soft: rgba(255, 255, 255, 0.06);
        --glass: rgba(255, 255, 255, 0.06);
        --text: #062235;
        --blue: #b3d4fc;
        --green: #c3eed6;
        --red: #fae0e4;
        --yellow: #ffe066;
        --btn-radius: 24px;
        --btn-shadow: 0 2px 12px rgba(240, 109, 90, 0.13);
        --btn-shadow-hover: 0 6px 18px rgba(240, 109, 90, 0.23);
        --btn-shadow-active: 0 1px 8px rgba(240, 109, 90, 0.16);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: Inter, system-ui, Arial;
        background: var(--bg);
        color: var(--text);
      }
      .wrap {
        max-width: 1100px;
        margin: 28px auto;
        padding: 28px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0)
        );
        border-radius: 14px;
        box-shadow: 0 10px 30px rgba(2, 8, 23, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .grid {
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 18px;
      }
      /* SIDEBAR */
      .sidebar {
        background: var(--card);
        padding: 18px;
        border-radius: 12px;
        color: var(--text);
        box-shadow: 0 4px 20px rgba(240, 224, 100, 0.09);
      }
      .painel-cards {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .painel-card {
        border-radius: 10px;
        padding: 12px;
        box-shadow: 0 2px 12px rgba(100, 100, 100, 0.06);
        margin-bottom: 0;
        font-size: 15px;
      }
      .painel-card.blue {
        background: var(--blue);
        color: var(--text);
      }
      .painel-card.green {
        background: var(--green);
        color: var(--text);
      }
      .painel-card.red {
        background: var(--red);
        color: var(--text);
      }
      .painel-card.yellow {
        background: var(--yellow);
        color: var(--text);
      }
      .painel-card h4 {
        margin-top: 0;
        margin-bottom: 8px;
      }
      .painel-card img {
        width: 100%;
        border-radius: 8px;
        margin-top: 6px;
      }
      .sidebar-actions .btn {
        width: 100%;
        margin-bottom: 2px;
      }
      .meta {
        margin-top: 14px;
        background: var(--yellow);
        color: var(--text);
        border-radius: 10px;
        padding: 10px;
      }
      .meta h4 {
        margin-top: 0;
      }

      /* BOTÕES (RESTAURO) */
      .btn {
        display: inline-block;
        padding: 12px 24px;
        border-radius: var(--btn-radius);
        background: var(--accent);
        color: #fff;
        font-weight: 700;
        font-size: 16px;
        border: none;
        cursor: pointer;
        transition: box-shadow 0.18s, background 0.18s, transform 0.16s;
        box-shadow: var(--btn-shadow);
        position: relative;
        outline: none;
        letter-spacing: 0.01em;
        margin-top: 3px;
      }
      .btn:active {
        transform: scale(0.97);
        box-shadow: var(--btn-shadow-active);
        background: #e85c47;
      }
      .btn:hover,
      .btn:focus {
        background: #fa866e;
        box-shadow: var(--btn-shadow-hover), 0 0 0 4px rgba(240, 224, 100, 0.08);
        outline: none;
      }
      .btn.alt {
        background: #2d9cdb;
        color: #fff;
        box-shadow: 0 2px 12px rgba(45, 156, 219, 0.14);
      }
      .btn.alt:hover,
      .btn.alt:focus {
        background: #44b1ee;
        box-shadow: 0 6px 18px rgba(45, 156, 219, 0.22),
          0 0 0 4px rgba(45, 156, 219, 0.09);
      }
      .btn.yellow {
        background: var(--yellow);
        color: var(--text);
        box-shadow: 0 2px 12px rgba(255, 224, 102, 0.14);
      }
      .btn.yellow:hover,
      .btn.yellow:focus {
        background: #fff6c6;
        color: #062235;
        box-shadow: 0 6px 18px rgba(255, 224, 102, 0.22),
          0 0 0 4px rgba(255, 224, 102, 0.09);
      }

      /* MAIN & TIMELINE */
      .hero {
        display: flex;
        gap: 18px;
        align-items: flex-start;
      }
      .hero-left {
        flex: 1;
        background: linear-gradient(180deg, #b3d4fc, #c3eed6);
        padding: 22px;
        border-radius: 14px;
        color: #062235;
      }
      .hero-right {
        width: 320px;
      }
      .card-img {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 8px 30px rgba(2, 8, 23, 0.1);
      }
      .card-img img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        display: block;
      }

      .timeline {
        margin-top: 18px;
        background: var(--card);
        padding: 18px;
        border-radius: 12px;
      }
      .timeline h3 {
        margin: 0 0 12px 0;
      }
      .timeline-track {
        position: relative;
        padding: 12px 6px;
      }
      .track-line {
        position: absolute;
        left: 40px;
        top: 12px;
        bottom: 12px;
        width: 4px;
        background: linear-gradient(180deg, var(--accent), #ffb66b);
        border-radius: 4px;
      }
      .event {
        position: relative;
        padding: 14px 14px 14px 80px;
        margin-bottom: 12px;
        border-radius: 10px;
        background: linear-gradient(180deg, #ffffff, #f6f6f6);
        box-shadow: 0 4px 12px rgba(2, 8, 23, 0.06);
        cursor: pointer;
        transition: transform 0.15s;
      }
      .event:hover {
        transform: translateY(-4px);
      }
      .event .dot {
        position: absolute;
        left: 24px;
        top: 20px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fff;
        font-weight: 700;
      }
      .event h4 {
        margin: 0 0 6px 0;
      }
      .event p {
        margin: 0;
        color: #26333b;
      }

      .right-panels {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 18px;
      }
      .panel {
        background: var(--card);
        padding: 14px;
        border-radius: 12px;
      }
      .panel h4 {
        margin: 0 0 10px 0;
      }
      .accordion .acc-item {
        border-top: 1px solid rgba(0, 0, 0, 0.05);
      }
      .acc-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        cursor: pointer;
      }
      .acc-body {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.28s ease;
      }

      .gallery {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .thumb {
        width: calc(50% - 5px);
        height: 120px;
        border-radius: 8px;
        overflow: hidden;
        cursor: pointer;
      }
      .thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .quiz-panel {
        background: var(--yellow);
        padding: 14px;
        border-radius: 12px;
        color: var(--text);
        margin-top: 14px;
      }
      .quiz .q {
        margin-bottom: 10px;
      }

      #mapModalOverlay {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 30, 55, 0.45);
        z-index: 9000;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
      }
      #mapModal {
        background: #fff;
        border-radius: 20px;
        padding: 20px 20px 12px 20px;
        box-shadow: 0 12px 40px 0px rgba(0, 40, 100, 0.15);
        max-width: 560px;
        width: 96vw;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        animation: fadeInMapModal 0.3s;
        position: relative;
      }
      #mapModal iframe {
        border-radius: 12px;
        border: 2px solid var(--blue);
        width: 500px;
        max-width: 90vw;
        height: 340px;
        box-shadow: 0 4px 24px rgba(45, 156, 219, 0.13);
        margin-bottom: 8px;
        background: #f7f6f3;
      }

      .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(1, 6, 12, 0.75);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }
      .lightbox img {
        max-width: 90%;
        max-height: 85%;
        border-radius: 8px;
      }

      footer {
        margin-top: 18px;
        padding: 12px;
        text-align: center;
        color: #062235;
        font-weight: 600;
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: 1fr;
        }
        .hero {
          flex-direction: column;
        }
        .hero-right {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header: same markup/classes as index (rb-*) so style.js/style.css will control it -->
    <header>
      <div class="rb-header-container">
        <!-- Logo (padronizado com o index) -->
        <a href="../index/index.html" class="rb-logo">
          <img src="../index/img/logo.png" alt="Logo Ribeirão Pires" />
        </a>

        <!-- Menu (mesmas classes/links do index) -->
        <nav class="rb-menu">
          <a href="../index/index.html">Início</a>
          <a href="../história/historia.html">História</a>
          <a href="#">Pontos Turísticos</a>
          <a href="#">Eventos</a>
          <a href="#">Mapa</a>
        </nav>

        <!-- Login -->
        <div class="rb-login">
          <a href="../login/login.html" class="rb-signin-btn">LOGIN</a>
        </div>

        <!-- Botão mobile: a classe rb-menu-btn é manipulada pelo script.js do site -->
        <button class="rb-menu-btn" aria-label="Menu">&#9776;</button>
      </div>
    </header>

    <main>
      <div class="wrap">
        <!-- Cabeçalho local (texto da página) -->
        <header style="margin-bottom: 18px">
          <div style="display: flex; gap: 18px; align-items: center">
            <div
              style="
                background: linear-gradient(135deg, var(--blue), var(--accent));
                width: 70px;
                height: 70px;
                border-radius: 18px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 2px 12px rgba(240, 109, 90, 0.09);
                border: 3px solid #fffbe2;
              "
            >
              <img
                src="../index/img/logo.png"
                alt="logo"
                style="
                  width: 54px;
                  height: 54px;
                  border-radius: 12px;
                  background: #fff;
                  border: 2px solid #ffe066;
                  object-fit: cover;
                "
              />
            </div>
            <div
              style="
                flex: 1;
                display: flex;
                flex-direction: column;
                justify-content: center;
              "
            >
              <h1
                style="font-family: Poppins; margin: 0 0 4px 0; font-size: 32px"
              >
                História de Ribeirão Pires
              </h1>
              <p style="font-size: 17px; color: #4a4a4a; margin: 0">
                Uma linha do tempo interativa, curiosidades, quiz e galeria para
                explorar a cidade.
              </p>
            </div>
          </div>
        </header>

        <div class="grid">
          <!-- SIDEBAR -->
          <aside class="sidebar">
            <div class="painel-cards">
              <div class="painel-card blue">
                <h4>Como tudo começou...</h4>
                <p>
                  Em 1839, Ribeirão Pires foi oficialmente fundada, inicialmente
                  como uma pequena vila ligada ao município de Santo André.
                  Durante o século XX, a cidade se industrializou, com destaque
                  para a produção de tecidos e a construção civil. Em 1953,
                  Ribeirão Pires se tornou oficialmente um município
                  independente.
                </p>
                <img src="/mnt/data/história.png" alt="Vista histórica" />
              </div>

              <div class="painel-card green">
                <h4>Curiosidades</h4>
                <ul style="padding-left: 16px; margin: 0">
                  <li>
                    <strong>Nome curioso:</strong> O nome vem do ribeirão que
                    corta a cidade e da família "Pires", dona de terras locais.
                  </li>
                  <li>
                    <strong>Estação histórica:</strong> A estação ferroviária
                    inaugurada em 1867 foi central para o desenvolvimento local
                    e ainda existe.
                  </li>
                  <li>
                    <strong>Primeira indústria:</strong> Em 1910, surge a
                    primeira fábrica têxtil, atraindo trabalhadores de diversas
                    regiões.
                  </li>
                  <li>
                    <strong>Turismo rural:</strong> A cidade preserva sítios e
                    trilhas ecológicas, como o caminho do Mirante.
                  </li>
                  <li>
                    <strong>Festas tradicionais:</strong> O Festival do
                    Chocolate, realizado desde 2005, atrai milhares de
                    visitantes.
                  </li>
                </ul>
              </div>

              <div class="painel-card red">
                <h4>Origem da Família Pires</h4>
                <p>
                  O sobrenome Pires tem origem portuguesa e significa "filho de
                  Pedro". Em Ribeirão Pires, está ligado a Antônio Pires de
                  Ávila, considerado um dos primeiros moradores no início do
                  século XVIII. A cidade teria recebido seu nome — "Ribeirão dos
                  Pires" — em referência à família.
                </p>
              </div>

              <div class="painel-card yellow">
                <h4>Linha do Tempo</h4>
                <ul style="padding-left: 16px; margin: 0">
                  <li>1839: Fundação da vila</li>
                  <li>1867: Inauguração da estação ferroviária</li>
                  <li>1910: Primeira indústria têxtil</li>
                  <li>1953: Emancipação como município</li>
                  <li>2005: Início do Festival do Chocolate</li>
                </ul>
              </div>
            </div>

            <!-- Botões -->
            <div
              class="sidebar-actions"
              style="
                margin-top: 14px;
                display: flex;
                flex-direction: column;
                gap: 8px;
              "
            >
              <button class="btn" id="startTour">Tour pela história</button>
              <button class="btn alt" id="openQuiz">Mini-quiz</button>
              <button class="btn yellow" id="showMap">
                Ver mapa interativo
              </button>
            </div>

            <div class="meta" style="margin-top: 12px">
              <h4>Dicas rápidas</h4>
              <p><strong>Fundação:</strong> 1839</p>
              <p><strong>Estação Ferroviária:</strong> 1867</p>
              <p><strong>Festival do Chocolate:</strong> Desde 2005</p>
              <p style="margin-top: 8px; font-size: 13px">
                Dica: Clique nos eventos da timeline ou nas curiosidades para
                ver detalhes e imagens.
              </p>
            </div>
          </aside>

          <!-- MAIN -->
          <section style="min-width: 0">
            <div class="hero">
              <div class="hero-left">
                <h2>Como tudo começou...</h2>
                <p id="intro">
                  Em 1839, Ribeirão Pires foi oficialmente fundada como uma vila
                  ligada a Santo André. Durante o século XX a cidade se
                  industrializou-se com destaque para a produção têxtil e a
                  construção civil. Explore a timeline à direita para navegar
                  por momentos marcantes.
                </p>
                <div
                  style="
                    margin-top: 12px;
                    display: flex;
                    gap: 10px;
                    flex-wrap: wrap;
                  "
                >
                  <button class="btn" id="startTourMain">
                    Fazer tour pela história
                  </button>
                  <button class="btn alt" id="openQuizMain">Mini-quiz</button>
                </div>
              </div>

              <div class="hero-right">
                <div class="card-img">
                  <img
                    src="/mnt/data/história.png"
                    alt="Ribeirão Pires histórica"
                  />
                </div>
              </div>
            </div>

            <!-- TIMELINE (com eventos completos) -->
            <section class="timeline" id="timeline">
              <h3>Linha do Tempo</h3>
              <div class="timeline-track">
                <div class="track-line"></div>

                <div class="event" data-id="e1">
                  <div class="dot">1839</div>
                  <h4>Fundação (1839)</h4>
                  <p>
                    Ribeirão Pires surge como vila ligada ao município de Santo
                    André — início de povoamento formal.
                  </p>
                </div>

                <div class="event" data-id="e2">
                  <div class="dot">1867</div>
                  <h4>Estação Ferroviária (1867)</h4>
                  <p>
                    A Estação Ferroviária foi inaugurada e impulsionou o
                    desenvolvimento da cidade, aproximando-a das rotas
                    comerciais.
                  </p>
                </div>

                <div class="event" data-id="e3">
                  <div class="dot">1910</div>
                  <h4>Primeira indústria têxtil (1910)</h4>
                  <p>
                    Instalação da primeira fábrica têxtil que elevou a economia
                    local e atraiu trabalhadores de diversas regiões.
                  </p>
                </div>

                <div class="event" data-id="e4">
                  <div class="dot">1953</div>
                  <h4>Município independente (1953)</h4>
                  <p>
                    Ribeirão Pires torna-se oficialmente município independente,
                    com sua própria administração.
                  </p>
                </div>

                <div class="event" data-id="e5">
                  <div class="dot">2005</div>
                  <h4>Festival do Chocolate (2005)</h4>
                  <p>
                    Festival tradicional que promove cultura, comércio e atração
                    turística para a cidade.
                  </p>
                </div>

                <div class="event" data-id="e6">
                  <div class="dot">Família</div>
                  <h4>Origem da Família Pires</h4>
                  <p>
                    Referências a Antônio Pires de Ávila e à família Pires, que
                    deram nome ao ribeirão e à região.
                  </p>
                </div>
              </div>
            </section>

            <div class="right-panels">
              <div class="panel">
                <h4>Curiosidades</h4>
                <div class="accordion">
                  <div class="acc-item">
                    <div class="acc-head">Nome curioso <span>+</span></div>
                    <div class="acc-body">
                      <p>
                        O nome vem do ribeirão que corta a cidade e da família
                        "Pires" que possuía terras na região.
                      </p>
                    </div>
                  </div>
                  <div class="acc-item">
                    <div class="acc-head">Estação histórica <span>+</span></div>
                    <div class="acc-body">
                      <p>
                        A Estação Ferroviária, de 1867, foi peça chave para o
                        crescimento da cidade e ainda mostra parte de sua
                        arquitetura original.
                      </p>
                    </div>
                  </div>
                  <div class="acc-item">
                    <div class="acc-head">
                      Primeira indústria <span>+</span>
                    </div>
                    <div class="acc-body">
                      <p>
                        Em 1910, a primeira fábrica têxtil trouxe progresso e
                        empregos para a cidade.
                      </p>
                    </div>
                  </div>
                  <div class="acc-item">
                    <div class="acc-head">Turismo rural <span>+</span></div>
                    <div class="acc-body">
                      <p>
                        O Mirante e trilhas ecológicas são pontos de turismo
                        rural que preservam a natureza local.
                      </p>
                    </div>
                  </div>
                  <div class="acc-item">
                    <div class="acc-head">Festival <span>+</span></div>
                    <div class="acc-body">
                      <p>
                        O Festival do Chocolate, desde 2005, integra
                        gastronomia, cultura e comércio local.
                      </p>
                    </div>
                  </div>
                  <div class="acc-item">
                    <div class="acc-head">Rivalidades <span>+</span></div>
                    <div class="acc-body">
                      <p>
                        Famílias como Pires e Camargo marcaram a política local
                        com disputas históricas.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="panel">
                <h4>Galeria & Mapas</h4>
                <div class="gallery" id="gallery">
                  <div class="thumb">
                    <img
                      src="/mnt/data/A_digital_informational_panel_titled_\"História_de_.png"
                      alt="thumb1"
                      data-full="/mnt/data/A_digital_informational_panel_titled_\"História_de_.png"
                    />
                  </div>
                  <div class="thumb">
                    <img
                      src="/mnt/data/história.png"
                      alt="thumb2"
                      data-full="/mnt/data/história.png"
                    />
                  </div>
                  <div class="thumb">
                    <img
                      src="/mnt/data/A_digital_informational_panel_titled_\"História_de_.png"
                      alt="thumb3"
                      data-full="/mnt/data/A_digital_informational_panel_titled_\"História_de_.png"
                    />
                  </div>
                  <div class="thumb">
                    <img
                      src="/mnt/data/história.png"
                      alt="thumb4"
                      data-full="/mnt/data/história.png"
                    />
                  </div>
                </div>

                <div style="margin-top: 12px">
                  <label
                    style="display: block; font-weight: 600; margin-bottom: 6px"
                    >Mapa interativo de Ribeirão Pires</label
                  >
                  <div
                    id="mapPlaceholder"
                    style="
                      background: #e9ecef;
                      padding: 8px;
                      border-radius: 8px;
                      color: #556;
                      min-height: 80px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    "
                  >
                    <span
                      >Clique no botão amarelo ao lado para abrir o mapa
                      interativo.</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- QUIZ (com botão Checar respostas e resultado) -->
            <section class="quiz-panel">
              <h4>Mini-quiz</h4>
              <div class="quiz" id="quiz" style="display: none">
                <div class="q">
                  <strong>1.</strong> Em que ano a Estação Ferroviária de
                  Ribeirão Pires foi inaugurada?<br />
                  <label
                    ><input type="radio" name="q1" value="1867" /> 1867</label
                  ><br />
                  <label
                    ><input type="radio" name="q1" value="1839" /> 1839</label
                  >
                </div>
                <div class="q">
                  <strong>2.</strong> O sobrenome "Pires" tem origem em qual
                  país?<br />
                  <label
                    ><input type="radio" name="q2" value="PT" /> Portugal</label
                  ><br />
                  <label
                    ><input type="radio" name="q2" value="ES" /> Espanha</label
                  >
                </div>
                <div class="q">
                  <strong>3.</strong> Qual evento tradicional atrai turistas à
                  cidade?<br />
                  <label
                    ><input type="radio" name="q3" value="chocolate" /> Festival
                    do Chocolate</label
                  ><br />
                  <label
                    ><input type="radio" name="q3" value="carnaval" />
                    Carnaval</label
                  >
                </div>
                <div class="q">
                  <strong>4.</strong> Ribeirão Pires foi fundada em qual ano?<br />
                  <label
                    ><input type="radio" name="q4" value="1839" /> 1839</label
                  ><br />
                  <label
                    ><input type="radio" name="q4" value="1867" /> 1867</label
                  >
                </div>
                <div class="q">
                  <strong>5.</strong> Qual setor industrial impulsionou a cidade
                  no século XX?<br />
                  <label
                    ><input type="radio" name="q5" value="têxtil" /> Indústria
                    têxtil</label
                  ><br />
                  <label
                    ><input type="radio" name="q5" value="automotiva" />
                    Indústria automotiva</label
                  >
                </div>
                <button class="btn" id="checkQuiz">Checar respostas</button>
                <div id="quizResult" style="margin-top: 10px"></div>
              </div>
            </section>
          </section>
        </div>

        <footer>
          Crie. Explore. Compartilhe — Projeto educativo sobre Ribeirão Pires
        </footer>
      </div>
    </main>

    <!-- MODAL DO MAPA INTERATIVO -->
    <div id="mapModalOverlay">
      <div id="mapModal">
        <h3>Mapa interativo de Ribeirão Pires</h3>
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3679.828009811771!2d-46.418245224646715!3d-23.71390757152402!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce43e4e1d3e6e7%3A0x7e9d8f4e2e02b5b9!2sRibeir%C3%A3o%20Pires%2C%20SP%2C%20Brasil!5e0!3m2!1spt-BR!2sbr!4v1711399143121!5m2!1spt-BR!2sbr"
          width="500"
          height="340"
          style="border: 0; border-radius: 12px"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
        <button class="btn yellow" onclick="closeMapModal()">
          Fechar mapa
        </button>
      </div>
    </div>

    <!-- LIGHTBOX -->
    <div class="lightbox" id="lightbox"><img src="" alt="preview" /></div>

    <!-- Site script (controls header mobile menu) -->
    <script src="../index/script.js"></script>

    <!-- Page scripts (timeline, accordion, gallery, quiz, tour, map) -->
    <script>
      // Timeline click -> update intro area
      document.querySelectorAll(".timeline .event").forEach((ev) => {
        ev.addEventListener("click", () => {
          const title = ev.querySelector("h4")?.innerText || "";
          const text = ev.querySelector("p")?.innerText || "";
          const intro = document.getElementById("intro");
          if (intro) {
            intro.innerHTML =
              "<strong>" +
              title +
              "</strong><br>" +
              text +
              '<br><small style="opacity:.85">Clique na galeria para ver imagens relacionadas.</small>';
            window.scrollTo({ top: 120, behavior: "smooth" });
          }
        });
      });

      // Accordion
      document.querySelectorAll(".acc-head").forEach((head) => {
        head.addEventListener("click", () => {
          const body = head.nextElementSibling;
          const open = body.style.maxHeight && body.style.maxHeight !== "0px";
          document
            .querySelectorAll(".acc-body")
            .forEach((b) => (b.style.maxHeight = null));
          if (!open) {
            body.style.maxHeight = body.scrollHeight + "px";
          }
        });
      });

      // Gallery lightbox
      const lightbox = document.getElementById("lightbox");
      lightbox?.addEventListener(
        "click",
        () => (lightbox.style.display = "none")
      );
      document.querySelectorAll(".thumb img").forEach((img) => {
        img.addEventListener("click", () => {
          const src = img.dataset.full || img.src;
          lightbox.querySelector("img").src = src;
          lightbox.style.display = "flex";
        });
      });

      // Quiz toggle and check
      function openQuiz() {
        const q = document.getElementById("quiz");
        if (!q) return;
        q.style.display = q.style.display === "none" ? "block" : "none";
        q.scrollIntoView({ behavior: "smooth", block: "center" });
      }
      document.getElementById("openQuiz")?.addEventListener("click", openQuiz);
      document
        .getElementById("openQuizMain")
        ?.addEventListener("click", openQuiz);

      document.getElementById("checkQuiz")?.addEventListener("click", () => {
        const answers = [
          { name: "q1", correct: "1867" },
          { name: "q2", correct: "PT" },
          { name: "q3", correct: "chocolate" },
          { name: "q4", correct: "1839" },
          { name: "q5", correct: "têxtil" },
        ];
        let score = 0;
        answers.forEach((a) => {
          const input = document.querySelector(`input[name=${a.name}]:checked`);
          if (input && input.value === a.correct) score++;
        });
        const out = document.getElementById("quizResult");
        if (out) out.innerText = `Você acertou ${score} de ${answers.length}.`;
      });

      // Tour
      function runTour() {
        const items = Array.from(document.querySelectorAll(".timeline .event"));
        items.forEach((ev, i) => {
          setTimeout(() => {
            ev.style.transform = "scale(1.03)";
            ev.style.boxShadow = "0 18px 50px rgba(2,8,23,0.45)";
            ev.scrollIntoView({ behavior: "smooth", block: "center" });
            setTimeout(() => {
              ev.style.transform = "";
              ev.style.boxShadow = "";
            }, 900);
          }, i * 900);
        });
      }
      document.getElementById("startTour")?.addEventListener("click", runTour);
      document
        .getElementById("startTourMain")
        ?.addEventListener("click", runTour);

      // Map modal open/close
      function openMapModal() {
        const overlay = document.getElementById("mapModalOverlay");
        if (!overlay) return;
        overlay.style.display = "flex";
        document.body.style.overflow = "hidden";
      }
      function closeMapModal() {
        const overlay = document.getElementById("mapModalOverlay");
        if (!overlay) return;
        overlay.style.display = "none";
        document.body.style.overflow = "";
      }
      document
        .getElementById("showMap")
        ?.addEventListener("click", openMapModal);

      // Logout placeholder (kept for compatibility)
      function logout() {
        alert("Você foi deslogado (simulação).");
        window.location.href = "../login/login.html";
      }

      // Preload gallery images
      document.querySelectorAll(".thumb img").forEach((i) => {
        const img = new Image();
        img.src = i.dataset.full || i.src;
      });
    </script>
  </body>
</html>